{"version":3,"sources":["../../src/swc/dirWorker.ts"],"sourcesContent":["import slash from \"slash\";\nimport { dirname, relative } from \"path\";\nimport { CompileStatus } from \"./constants\";\nimport { compile, getDest } from \"./util\";\nimport { outputResult } from \"./compile\";\n\nimport type { Options } from \"@swc/core\";\nimport type { CliOptions } from \"./options\";\n\nexport default async function handleCompile(opts: {\n  filename: string;\n  outDir: string;\n  sync: boolean;\n  cliOptions: CliOptions;\n  swcOptions: Options;\n}) {\n  const dest = getDest(\n    opts.filename,\n    opts.outDir,\n    opts.cliOptions.stripLeadingPaths,\n    \".js\"\n  );\n  const sourceFileName = slash(relative(dirname(dest), opts.filename));\n\n  const options = { ...opts.swcOptions, sourceFileName };\n\n  const result = await compile(opts.filename, options, opts.sync, dest);\n\n  if (result) {\n    await outputResult(result, opts.filename, dest, options);\n    return CompileStatus.Compiled;\n  } else {\n    return CompileStatus.Omitted;\n  }\n}\n"],"names":["handleCompile","opts","dest","getDest","filename","outDir","cliOptions","stripLeadingPaths","sourceFileName","slash","relative","dirname","options","swcOptions","result","compile","sync","outputResult","CompileStatus","Compiled","Omitted"],"mappings":";;;;+BASA;;aAA8BA;;4DATZ;sBACgB;2BACJ;sBACG;yBACJ;;;;;;AAKd,eAAeA,cAAcC,IAM3C,EAAE;IACD,MAAMC,OAAOC,IAAAA,aAAO,EAClBF,KAAKG,QAAQ,EACbH,KAAKI,MAAM,EACXJ,KAAKK,UAAU,CAACC,iBAAiB,EACjC;IAEF,MAAMC,iBAAiBC,IAAAA,cAAK,EAACC,IAAAA,cAAQ,EAACC,IAAAA,aAAO,EAACT,OAAOD,KAAKG,QAAQ;IAElE,MAAMQ,UAAU;QAAE,GAAGX,KAAKY,UAAU;QAAEL;IAAe;IAErD,MAAMM,SAAS,MAAMC,IAAAA,aAAO,EAACd,KAAKG,QAAQ,EAAEQ,SAASX,KAAKe,IAAI,EAAEd;IAEhE,IAAIY,QAAQ;QACV,MAAMG,IAAAA,qBAAY,EAACH,QAAQb,KAAKG,QAAQ,EAAEF,MAAMU;QAChD,OAAOM,wBAAa,CAACC,QAAQ;IAC/B,OAAO;QACL,OAAOD,wBAAa,CAACE,OAAO;IAC9B,CAAC;AACH"}